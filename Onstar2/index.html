<!DOCTYPE html>

<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ì „ë¶ê³¼í•™ê³ ë“±í•™êµ ë‹¤êµ­ì–´ ìë™ ê°ì§€ TTS</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>

<style>
body{
 background:linear-gradient(135deg,#eef3ff,#f9fbff);
 font-family:"ë§‘ì€ ê³ ë”•",sans-serif;
 display:flex;
 justify-content:center;
 padding:30px;
}
.container{
 width:1200px;
 background:white;
 padding:25px 30px 30px 30px;
 border-radius:18px;
 box-shadow:0 8px 25px rgba(0,0,0,0.12);
}

h2{margin-top:0;text-align:center;color:#2c3e50;}

textarea{
 width:100%;
 height:300px;
 font-size:19px;
 padding:18px;
 border-radius:12px;
 border:1px solid #ccd3e0;
 resize:none;
 line-height:1.7;
}

.topbar{
 display:flex;
 justify-content:space-between;
 align-items:center;
 margin-bottom:10px;
}

.voiceRow{
 display:flex;
 gap:10px;
 margin:10px 0 15px 0;
}

.dropdown{
 position:relative;
}

.dropbtn{
 background:#2e86de;
 color:white;
 border:none;
 padding:9px 18px;
 border-radius:10px;
 cursor:pointer;
}

.menu{
 position:absolute;
 top:40px;
 left:0;
 background:white;
 border-radius:10px;
 box-shadow:0 6px 18px rgba(0,0,0,0.15);
 display:none;
 min-width:140px;
 z-index:5;
}

.menu button{
 width:100%;
 background:white;
 color:#333;
 border:none;
 padding:8px;
 text-align:left;
}
.menu button:hover{background:#f0f4ff;}

.controls{
 text-align:center;
 margin-top:15px;
}

.mainbtn{
 background:#27ae60;
 padding:10px 25px;
 border:none;
 border-radius:12px;
 color:white;
 font-size:18px;
 margin:5px;
 cursor:pointer;
}
.stop{background:#e74c3c;}
.pause{background:#f39c12;}
</style>

</head>

<body>
<div class="container">

<h2>ì „ë¶ê³¼í•™ê³ ë“±í•™êµ ë‹¤êµ­ì–´ ìë™ ê°ì§€ TTS</h2>

<div class="topbar">
<input type="file" id="fileInput" accept=".txt,.pdf">
</div>

<div class="voiceRow">
<div class="dropdown">
<button class="dropbtn" onclick="toggleMenu('koMenu')">í•œêµ­ì–´</button>
<div id="koMenu" class="menu">
<button onclick="setVoice('ko','male','koMenu')">ë‚¨ì</button>
<button onclick="setVoice('ko','female','koMenu')">ì—¬ì</button>
<button onclick="setVoice('ko','child','koMenu')">ì–´ë¦°ì´</button>
<button onclick="setVoice('ko','cat','koMenu')">ê³ ì–‘ì´</button>
<button onclick="setVoice('ko','devil','koMenu')">ì•…ë§ˆ</button>
</div>
</div>

<div class="dropdown">
<button class="dropbtn" onclick="toggleMenu('enMenu')">English</button>
<div id="enMenu" class="menu">
<button onclick="setVoice('en','male','enMenu')">Male</button>
<button onclick="setVoice('en','female','enMenu')">Female</button>
<button onclick="setVoice('en','child','enMenu')">Child</button>
<button onclick="setVoice('en','cat','enMenu')">Cat</button>
<button onclick="setVoice('en','devil','enMenu')">Devil</button>
</div>
</div>

<div class="dropdown">
<button class="dropbtn" onclick="toggleMenu('jaMenu')">æ—¥æœ¬èª</button>
<div id="jaMenu" class="menu">
<button onclick="setVoice('ja','male','jaMenu')">ç”·</button>
<button onclick="setVoice('ja','female','jaMenu')">å¥³</button>
<button onclick="setVoice('ja','child','jaMenu')">å­ä¾›</button>
<button onclick="setVoice('ja','cat','jaMenu')">çŒ«</button>
<button onclick="setVoice('ja','devil','jaMenu')">æ‚ªé­”</button>
</div>
</div>
</div>

<textarea id="text">
ì „ë¶ê³¼í•™ê³ ë“±í•™êµ

êµìœ¡ ëª©í‘œ

ê³¼í•™ì˜ì¬ì˜ ì¡°ê¸° ë°œêµ´ ìœ¡ì„±
 Early identification and nurturing of scientifically gifted students
 ç§‘å­¦è‹±æ‰ã®æ—©æœŸç™ºæ˜ã¨è‚²æˆ

ê³ ê¸‰ ê³¼í•™ ë‘ë‡Œ ì–‘ì„±ì˜ ê¸°ë°˜ ì¡°ì„±
 Establishing a foundation for cultivating advanced scientific minds
 é«˜åº¦ãªç§‘å­¦çš„äººæè‚²æˆã®åŸºç›¤ã¥ãã‚Š

ê³¼í•™ ê¸°ìˆ  ë°œì „ì„ ì„ ë„í•  ì¸ì¬ ì–‘ì„±
 Fostering talents who will lead advancements in science and technology
 ç§‘å­¦æŠ€è¡“ã®ç™ºå±•ã‚’å…ˆå°ã™ã‚‹äººæã®è‚²æˆ

ê²½ì˜ ë°©ì¹¨

ì¡°í™”ë¡œìš´ ì¸ê²©ê³¼ ì „ë¬¸ì„±ì„ ê°–ì¶˜ ì‹¤ë ¥ì¸ ì–‘ì„±
 Cultivating competent individuals with harmonious character and professionalism
 èª¿å’Œã®ã¨ã‚ŒãŸäººæ ¼ã¨å°‚é–€æ€§ã‚’å‚™ãˆãŸå®ŸåŠ›ã‚ã‚‹äººæã®è‚²æˆ

ë¶ˆí¸í•¨ì„ ê°ë‚´í•˜ëŠ” ì§€í˜œì™€ ë”ë¶ˆì–´ ì‚¬ëŠ” ê³µë™ì²´ ì˜ì‹ í•¨ì–‘
 Developing wisdom to endure challenges and a strong sense of community
 å›°é›£ã«è€ãˆã‚‹çŸ¥æµã¨å…±ã«ç”Ÿãã‚‹å…±åŒä½“æ„è­˜ã®æ¶µé¤Š

ì†Œì§ˆê³¼ ì ì„±ì„ ê½ƒí”¼ìš°ëŠ” ê³¼í•™ ì¸ì¬ êµìœ¡
 Providing science education that helps talents and aptitudes flourish
 ç´ è³ªã¨é©æ€§ã‚’ä¼¸ã°ã™ç§‘å­¦äººææ•™è‚²

êµê¶Œê³¼ í•™ìƒ ì¸ê¶Œì´ ì¡°í™”ë¥¼ ì´ë£¨ëŠ” í•™êµ ìš´ì˜
 Operating a school where teachersâ€™ authority and studentsâ€™ rights are balanced
 æ•™å¸«ã®æ¨©å¨ã¨å­¦ç”Ÿã®äººæ¨©ãŒèª¿å’Œã™ã‚‹å­¦æ ¡é‹å–¶

ë¯¸ë˜ ì§€í–¥ì ì¸ êµìˆ˜ í•™ìŠµ í™˜ê²½ ì¡°ì„±
 Creating a future-oriented teaching and learning environment
 æœªæ¥å¿—å‘ã®æ•™æˆãƒ»å­¦ç¿’ç’°å¢ƒã®æ§‹ç¯‰

êµìœ¡ ë¹„ì „

í•™ìƒ : ììœ¨ê³¼ ì°½ì˜ë¡œ íƒêµ¬í•˜ëŠ” í•™ìƒ
 Students: Learners who explore with autonomy and creativity
 å­¦ç”Ÿï¼šè‡ªå¾‹ã¨å‰µé€ æ€§ã§æ¢ç©¶ã™ã‚‹å­¦ç”Ÿ

êµì› : ì‚¬ë‘ê³¼ ì •ì„±ìœ¼ë¡œ ê°€ë¥´ì¹˜ëŠ” êµì›
 Teachers: Educators who teach with love and dedication
 æ•™å“¡ï¼šæ„›æƒ…ã¨çœŸå¿ƒã‚’ã‚‚ã£ã¦æ•™ãˆã‚‹æ•™å“¡

í•™êµ : êµìœ¡ê³µë™ì²´ê°€ ë§Œì¡±í•˜ëŠ” ì¦ê²ê³  í–‰ë³µí•œ í•™êµ
 School: A joyful and happy school where the educational community is satisfied
 å­¦æ ¡ï¼šæ•™è‚²å…±åŒä½“ãŒæº€è¶³ã™ã‚‹æ¥½ã—ãå¹¸ã›ãªå­¦æ ¡

</textarea>

<div class="controls">
<button class="mainbtn" onclick="start()">ğŸ”Š ì½ê¸°</button>
<button class="mainbtn pause" onclick="pauseResume()">â¸ ì ì‹œë©ˆì¶¤</button>
<button class="mainbtn stop" onclick="stopTTS()">â¹ ì •ì§€</button>
</div>

</div>

<script>
let settings={ko:'female',en:'female',ja:'female'};

function toggleMenu(id){
 document.querySelectorAll('.menu').forEach(m=>{ if(m.id!==id)m.style.display='none';});
 let m=document.getElementById(id);
 m.style.display=(m.style.display=='block')?'none':'block';
}

function setVoice(lang,type,menuId){
 settings[lang]=type;
 document.getElementById(menuId).style.display='none';
}

function applyCharacter(u,lang){
 let t=settings[lang];
 if(t=="male"){u.pitch=0.7;u.rate=0.95;}
 if(t=="female"){u.pitch=1;u.rate=1;}
 if(t=="child"){u.pitch=1.5;u.rate=1.1;}
 if(t=="cat"){u.pitch=2;u.rate=1.25;}
 if(t=="devil"){u.pitch=0.5;u.rate=0.85;}
}

function charLang(c){
 if(/[ê°€-í£]/.test(c))return"ko";
 if(/[ã-ã‚“ã‚¡-ãƒ³ä¸€-é¾¯]/.test(c))return"ja";
 if(/[a-zA-Z]/.test(c))return"en";
 return"keep";
}

function splitLang(text){
 let arr=[],cur="",lang=null;
 for(let ch of text){
  let l=charLang(ch);
  if(l=="keep")l=lang;
  if(!lang)lang=l;
  if(l!=lang){arr.push({text:cur,lang});cur=ch;lang=l;}
  else cur+=ch;
 }
 if(cur)arr.push({text:cur,lang});
 return arr;
}

let queue=[],index=0,paused=false;

function buildQueue(){
 queue=splitLang(document.getElementById("text").value).filter(p=>p.text.trim()!="");
}

function speakNext(){
 if(index>=queue.length)return;
 let u=new SpeechSynthesisUtterance(queue[index].text);
 let map={ko:"ko-KR",en:"en-US",ja:"ja-JP"};
 u.lang=map[queue[index].lang];
 applyCharacter(u,queue[index].lang);
 u.onend=()=>{if(!paused){index++;speakNext();}};
 speechSynthesis.speak(u);
}

function start(){speechSynthesis.cancel();index=0;paused=false;buildQueue();speakNext();}
function pauseResume(){if(!paused){paused=true;speechSynthesis.cancel();}else{paused=false;speakNext();}}
function stopTTS(){speechSynthesis.cancel();index=0;paused=false;}

// íŒŒì¼ ë¶ˆëŸ¬ì˜¤ê¸°
document.getElementById("fileInput").addEventListener("change",async e=>{
 const file=e.target.files[0];
 if(!file)return;

 if(file.name.endsWith(".txt")){
  document.getElementById("text").value=await file.text();
 }

 if(file.name.endsWith(".pdf")){
  const reader=new FileReader();
  reader.onload=async function(){
   const pdf=await pdfjsLib.getDocument(new Uint8Array(this.result)).promise;
   let full="";
   for(let i=1;i<=pdf.numPages;i++){
    const page=await pdf.getPage(i);
    const content=await page.getTextContent();
    content.items.forEach(it=>full+=it.str+" ");
    full+="\n";
   }
   document.getElementById("text").value=full;
  };
  reader.readAsArrayBuffer(file);
 }
});
</script>

</body>
</html>
